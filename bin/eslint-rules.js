const fs = require('fs');
const CLIEngine = require("eslint").CLIEngine;

const plugins = [
  ['@typescript-eslint', 'plugin:@typescript-eslint/all'],
  ['eslint', 'eslint:all'],
  ['jest', 'plugin:jest/all'],
  ['lodash', 'plugin:lodash/recommended'],
  ['lodash-fp', 'plugin:lodash-fp/recommended'],
  ['react', 'plugin:react/all'],
]

const schema = { };

plugins.forEach(plugin => {

  const cli = new CLIEngine({
    baseConfig: {
      plugins: [plugin[0]],
      extends: [plugin[1]]
    },
    useEslintrc: true
  });

  const rules = cli.getRules();

  const obj = { };
  rules.forEach((value, key) => obj[key] = value);

  schema[plugin[0]] = obj;

});

const script = `
// autogenerated by bin/eslint-rules.ts
eslintRules = ${JSON.stringify(schema, null, 2)}
`;

fs.writeFileSync('../src/assets/eslint-rules.js', script);
