<ng-container
  [formGroup]="generalForm">

  <ng-container
    *ngFor="let property of properties">

    <div
      [ngClass]="{active: isConfigured(property[0]), inherited: isInherited(property[0])}"
      class="gutter">
    </div>

    <section 
      [ngClass]="property[0]"
      class="property">

      <!-- TITLE -->

      <a
        [href]="'https://eslint.org/docs/user-guide/configuring#' + property[1]"
        [ngClass]="{active: isConfigured(property[0])}"
        class="name"
        target="lintel"
        tabIndex=-1>
        {{ property[0] }}
      </a>

      <!-- DESCRIPTION -->

      <article
        class="description">

        <!-- NOTE: special version of description for properties that are just a checkbox -->

        <ng-container
          [ngSwitch]="property[0]">

          <!-- NOINLINECONFIG -->

          <ng-container
            *ngSwitchCase="'noInlineConfig'">

            <lintel-checkbox
              formControlName="noInlineConfig">
            </lintel-checkbox>

            <p>{{ schema.properties.noInlineConfig.description }}</p>

          </ng-container>

          <!-- ROOT -->

          <ng-container
            *ngSwitchCase="'root'">

            <lintel-checkbox
              formControlName="root">
            </lintel-checkbox>

            <p>{{ schema.properties.root.description }}</p>

          </ng-container>

          <!-- REPORTUNUSEDDIRECTIVES -->

          <ng-container
            *ngSwitchCase="'reportUnusedDisableDirectives'">

            <lintel-checkbox
              formControlName="reportUnusedDisableDirectives">
            </lintel-checkbox>

            <!-- NOTE: for some reason, this isn't in the schema -->

            <p>To report unused eslint-disable comments, use reportUnusedDisableDirectives setting.</p>

          </ng-container>

          <p
            *ngSwitchDefault>
            {{ schema.properties[property[0]]?.description }}

            <ng-container
              *ngIf="isInherited(property[0])">
              <b>Settings inherited from <code>extends</code> 
              <ng-container
                *ngIf="property[0] !== 'plugins'">
                can be overriden and
              </ng-container>
              are shown grayed.</b>
            </ng-container>

          </p>

        </ng-container>

      </article>

      <article
        [ngSwitch]="property[0]"
        class="settings">

        <!-- ECMAFEATURES -->

        <lintel-multiselector
          [defaults]="configs.extension.parserOptions?.ecmaFeatures"
          [options]="makeOptionsForMultiselector('ecmaFeatures', 'parserOptions.ecmaFeatures')"
          *ngSwitchCase="'ecmaFeatures'"
          class="ecmaFeatures"
          columnWidth="20.5rem"
          formControlName="ecmaFeatures">
        </lintel-multiselector>

        <!-- ENV -->

        <lintel-multiselector
          [defaults]="configs.extension.env"
          [options]="makeOptionsForMultiselector('env', 'env')"
          *ngSwitchCase="'env'"
          class="env"
          columnWidth="10rem"
          formControlName="env">
        </lintel-multiselector>

        <!-- EXTENDS -->

        <lintel-input-array
          *ngSwitchCase="'extends'"
          class="extends"
          columnWidth="20.5rem"
          formControlName="extends">
        </lintel-input-array>

        <!-- GLOBALS -->

        <lintel-key-value
          [defaults]="configs.extension.globals"
          [valueConstraints]="makeOptionsForSingleselector('globals.additionalProperties.oneOf[0]')"
          *ngSwitchCase="'globals'"
          class="globals"
          columnWidth="20.5rem"
          formControlName="globals">
        </lintel-key-value>

        <!-- IGNOREPATTERNS -->

        <lintel-input-array
          *ngSwitchCase="'ignorePatterns'"
          class="ignorePatterns"
          columnWidth="10rem"
          formControlName="ignorePatterns">
        </lintel-input-array>

        <!-- PARSER -->

        <div
          *ngSwitchCase="'parser'"
          class="parser">

          <lintel-input
            [placeholder]="configs.extension.parser || ''"
            formControlName="parser">
          </lintel-input>

          <p
            (click)="editFile(selection.fileName)"
            *ngIf="configs.configuration.parser || configs.extension.parser"
            class="editSettings">
            <a>Edit custom parser options in {{ configs.shortFileName(selection.fileName) }}</a>
          </p>

        </div>

        <!-- PARSEROPTIONS -->

        <lintel-parser-options
          *ngSwitchCase="'parserOptions'">
        </lintel-parser-options>

        <!-- PLUGINS -->

        <lintel-input-array
          [defaults]="configs.extension.plugins"
          [uniqueItems]="true"
          *ngSwitchCase="'plugins'"
          class="plugins"
          columnWidth="10rem"
          formControlName="plugins">
        </lintel-input-array>

        <!-- SETTINGS -->

        <ng-container
          *ngSwitchCase="'settings'">

          <lintel-key-value
            *ngIf="canDoSettings(); else cantDoSettings"
            class="settings"
            columnWidth="20.5rem"
            formControlName="settings">
          </lintel-key-value>

          <ng-template
            #cantDoSettings>
            <p
              (click)="editFile(selection.fileName)"
              class="editSettings">
              <a>Edit settings in {{ configs.shortFileName(selection.fileName) }}</a>
            </p>
          </ng-template>

        </ng-container>

      </article>

    </section>

  </ng-container>

</ng-container>
